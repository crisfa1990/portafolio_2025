<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Cheatsheet Pandas 游늵</title>
    
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Font Awesome para 칤conos -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet">
    
    <!-- Google Fonts: Roboto -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&display=swap" rel="stylesheet">
    
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            font-size: 11px;
            background: #fff;
            padding: 10px 10px 10px 20px;
        }
        h1 {
            font-weight: 500;
            margin-bottom: 20px;
            font-size: 1.5rem;
        }
        pre {
            background: #f8f9fa;
            padding: 6px;
            border-radius: 4px;
            font-size: 11px;
            word-wrap: break-word;
            margin-bottom: 8px;
        }
        h2 {
            border-bottom: 1px solid #dee2e6;
            padding-bottom: 2px;
            margin-top: 15px;
            color: #0d6efd;
            font-size: 1.1rem;
        }
        h3 {
            font-size: 1rem;
            color: #495057;
            margin-top: 10px;
        }
        .bi, .fa {
            color: #0d6efd;
            margin-right: 3px;
            font-size: 0.9rem;
        }
        .section-title {
            display: flex;
            align-items: center;
        }
        .section-title i {
            margin-right: 5px;
        }
        .col-md-6 {
            padding: 0 5px;
        }
        @media print {
            body {
                padding: 0 0 0 20px;
                margin: 0;
            }
            .container {
                max-width: 100%;
                padding: 0;
            }
            pre {
                page-break-inside: avoid;
            }
        }
    </style>
</head>
<body class="container my-2">

    <h1 class="text-center">游늵 Cheatsheet Completo de Pandas</h1>

    <div class="row">
        <div class="col-md-6">
            <h2 class="section-title"><i class="fa fa-download"></i> Instalaci칩n y Configuraci칩n</h2>
            
            <h3>Instalaci칩n</h3>
            <pre># Instalar pandas
pip install pandas

# Instalar versi칩n espec칤fica
pip install pandas==2.0.0

# Instalar con dependencias recomendadas
pip install pandas[all]

# Actualizar pandas
pip install --upgrade pandas</pre>

            <h3>Importaci칩n</h3>
            <pre># Importaci칩n est치ndar
import pandas as pd

# Importaci칩n con alias com칰n
import pandas as pd
import numpy as np  # Para operaciones num칠ricas</pre>

            <h2 class="section-title"><i class="fa fa-table"></i> Estructuras de Datos</h2>
            
            <h3>Series</h3>
            <pre># Crear Series
s = pd.Series([1, 3, 5, np.nan, 6, 8])

# Series con 칤ndice personalizado
s = pd.Series([1, 2, 3], index=['a', 'b', 'c'])

# Series a partir de diccionario
d = {'a': 1, 'b': 2, 'c': 3}
s = pd.Series(d)</pre>

            <h3>DataFrames</h3>
            <pre># Crear DataFrame
df = pd.DataFrame({
    'A': [1, 2, 3],
    'B': ['a', 'b', 'c'],
    'C': pd.date_range('20230101', periods=3)
})

# DataFrame desde diccionario de listas
data = {
    'nombre': ['Juan', 'Ana', 'Pedro'],
    'edad': [25, 30, 35],
    'ciudad': ['Madrid', 'Barcelona', 'Valencia']
}
df = pd.DataFrame(data)

# DataFrame desde lista de diccionarios
data = [
    {'nombre': 'Juan', 'edad': 25},
    {'nombre': 'Ana', 'edad': 30}
]
df = pd.DataFrame(data)</pre>
        </div>

        <div class="col-md-6">
            <h2 class="section-title"><i class="fa fa-file-import"></i> Lectura y Escritura de Datos</h2>
            
            <h3>CSV</h3>
            <pre># Leer CSV
df = pd.read_csv('archivo.csv')

# Leer CSV con opciones
df = pd.read_csv('archivo.csv',
    sep=',',
    encoding='utf-8',
    header=0,
    index_col=0,
    na_values=['NA', 'N/A']
)

# Escribir CSV
df.to_csv('salida.csv', index=False)</pre>

            <h3>Excel</h3>
            <pre># Leer Excel
df = pd.read_excel('archivo.xlsx', sheet_name='Hoja1')

# Leer m칰ltiples hojas
dfs = pd.read_excel('archivo.xlsx', sheet_name=['Hoja1', 'Hoja2'])

# Escribir Excel
df.to_excel('salida.xlsx', sheet_name='Datos')</pre>

            <h3>JSON</h3>
            <pre># Leer JSON
df = pd.read_json('archivo.json')

# Leer JSON desde URL
df = pd.read_json('https://api.ejemplo.com/datos')

# Escribir JSON
df.to_json('salida.json', orient='records')</pre>
        </div>
    </div>

    <div class="row">
        <div class="col-md-6">
            <h2 class="section-title"><i class="fa fa-search"></i> Selecci칩n y Filtrado</h2>
            
            <h3>Selecci칩n de Columnas</h3>
            <pre># Seleccionar una columna
df['columna']

# Seleccionar m칰ltiples columnas
df[['col1', 'col2']]

# Seleccionar por tipo de dato
df.select_dtypes(include=['number'])
df.select_dtypes(exclude=['object'])</pre>

            <h3>Selecci칩n de Filas</h3>
            <pre># Por 칤ndice
df.loc[0]  # Primera fila
df.loc[0:5]  # Primeras 6 filas

# Por posici칩n
df.iloc[0]  # Primera fila
df.iloc[0:5]  # Primeras 6 filas

# Por condici칩n
df[df['edad'] > 30]
df[(df['edad'] > 30) & (df['ciudad'] == 'Madrid')]</pre>

            <h3>Filtrado Avanzado</h3>
            <pre># Usando query
df.query('edad > 30 and ciudad == "Madrid"')

# Usando isin
df[df['ciudad'].isin(['Madrid', 'Barcelona'])]

# Usando str.contains
df[df['nombre'].str.contains('Juan')]

# Usando between
df[df['edad'].between(25, 35)]</pre>
        </div>

        <div class="col-md-6">
            <h2 class="section-title"><i class="fa fa-calculator"></i> Operaciones y C치lculos</h2>
            
            <h3>Estad칤sticas B치sicas</h3>
            <pre># Estad칤sticas descriptivas
df.describe()

# Media, mediana, moda
df.mean()
df.median()
df.mode()

# Suma, m칤nimo, m치ximo
df.sum()
df.min()
df.max()

# Desviaci칩n est치ndar, varianza
df.std()
df.var()</pre>

            <h3>Agrupaci칩n</h3>
            <pre># Agrupaci칩n b치sica
df.groupby('ciudad').mean()

# Agrupaci칩n m칰ltiple
df.groupby(['ciudad', 'edad']).sum()

# Funciones de agregaci칩n
df.groupby('ciudad').agg({
    'edad': ['mean', 'min', 'max'],
    'salario': 'sum'
})</pre>

            <h3>Transformaciones</h3>
            <pre># Aplicar funci칩n
df['edad'].apply(lambda x: x * 2)

# Map de valores
df['ciudad'].map({'Madrid': 'MAD', 'Barcelona': 'BCN'})

# Reemplazar valores
df.replace({'S칤': True, 'No': False})

# Valores 칰nicos
df['ciudad'].unique()
df['ciudad'].nunique()</pre>
        </div>
    </div>

    <div class="row">
        <div class="col-md-6">
            <h2 class="section-title"><i class="fa fa-sort"></i> Ordenamiento y Limpieza</h2>
            
            <h3>Ordenamiento</h3>
            <pre># Ordenar por columna
df.sort_values('edad')
df.sort_values('edad', ascending=False)

# Ordenar por m칰ltiples columnas
df.sort_values(['ciudad', 'edad'])

# Ordenar por 칤ndice
df.sort_index()</pre>

            <h3>Limpieza de Datos</h3>
            <pre># Valores nulos
df.isnull()
df.notnull()
df.dropna()
df.fillna(0)

# Duplicados
df.duplicated()
df.drop_duplicates()

# Cambiar tipos de datos
df['edad'] = df['edad'].astype('int')
df['fecha'] = pd.to_datetime(df['fecha'])</pre>

            <h3>Manipulaci칩n de 칈ndices</h3>
            <pre># Resetear 칤ndice
df.reset_index()

# Establecer 칤ndice
df.set_index('columna')

# Renombrar 칤ndice
df.rename(index={'old': 'new'})

# Renombrar columnas
df.rename(columns={'old': 'new'})</pre>
        </div>

        <div class="col-md-6">
            <h2 class="section-title"><i class="fa fa-chart-line"></i> Visualizaci칩n y An치lisis</h2>
            
            <h3>Visualizaci칩n B치sica</h3>
            <pre># Gr치fico de l칤neas
df.plot()

# Gr치fico de barras
df.plot.bar()

# Histograma
df['edad'].plot.hist()

# Gr치fico de dispersi칩n
df.plot.scatter(x='edad', y='salario')

# Box plot
df.plot.box()</pre>

            <h3>An치lisis Temporal</h3>
            <pre># Resample temporal
df.resample('M').mean()
df.resample('D').sum()

# Rolling window
df.rolling(window=7).mean()
df.rolling(window=30).std()

# Diferencias
df.diff()
df.pct_change()</pre>

            <h3>M칠todos Avanzados</h3>
            <pre># Pivot tables
pd.pivot_table(df, values='salario',
    index='ciudad', columns='edad')

# Crosstab
pd.crosstab(df['ciudad'], df['edad'])

# Merge/Join
pd.merge(df1, df2, on='id')
df1.join(df2)

# Concatenaci칩n
pd.concat([df1, df2])
pd.concat([df1, df2], axis=1)</pre>
        </div>
    </div>

    <div class="row">
        <div class="col-md-6">
            <h2 class="section-title"><i class="fa fa-cogs"></i> Optimizaci칩n y Rendimiento</h2>
            
            <h3>Tipos de Datos</h3>
            <pre># Optimizar tipos de datos
df['columna'] = df['columna'].astype('category')
df['columna'] = df['columna'].astype('int8')

# Ver uso de memoria
df.memory_usage(deep=True)
df.info(memory_usage='deep')</pre>

            <h3>Operaciones Vectorizadas</h3>
            <pre># Evitar loops
# Mal
for i in range(len(df)):
    df.loc[i, 'nuevo'] = df.loc[i, 'col1'] * 2

# Bien
df['nuevo'] = df['col1'] * 2

# Usar apply con cuidado
df['nuevo'] = df['col1'].apply(lambda x: x * 2)</pre>

            <h3>Chunking y Procesamiento en Lote</h3>
            <pre># Leer archivo por chunks
chunksize = 10000
for chunk in pd.read_csv('archivo.csv', chunksize=chunksize):
    procesar_chunk(chunk)

# Procesamiento en paralelo
import multiprocessing as mp

def procesar_chunk(chunk):
    return chunk.groupby('columna').sum()

with mp.Pool(4) as pool:
    resultados = pool.map(procesar_chunk, chunks)</pre>
        </div>

        <div class="col-md-6">
            <h2 class="section-title"><i class="fa fa-code"></i> Funciones y M칠todos 칔tiles</h2>
            
            <h3>Funciones de Cadena</h3>
            <pre># Operaciones con strings
df['nombre'].str.lower()
df['nombre'].str.upper()
df['nombre'].str.contains('patr칩n')
df['nombre'].str.replace('viejo', 'nuevo')
df['nombre'].str.split(' ')</pre>

            <h3>Funciones de Fecha</h3>
            <pre># Extraer componentes
df['fecha'].dt.year
df['fecha'].dt.month
df['fecha'].dt.day
df['fecha'].dt.dayofweek

# Operaciones con fechas
df['fecha'] + pd.Timedelta(days=1)
df['fecha'].dt.floor('D')
df['fecha'].dt.ceil('H')</pre>

            <h3>Funciones Personalizadas</h3>
            <pre># Funci칩n personalizada
def procesar_datos(df):
    df['nuevo'] = df['col1'] * df['col2']
    return df

# Aplicar funci칩n
df = procesar_datos(df)

# Funci칩n con m칰ltiples retornos
def estadisticas(df):
    return df.mean(), df.median(), df.std()

media, mediana, desv = estadisticas(df)</pre>
        </div>
    </div>

</body>
</html> 